<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Poison Browser</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
  :root {
    --bg1: #160024;
    --bg2: #020824;
    --bg3: #000000;
    --neon-cyan: #00f6ff;
    --neon-violet: #c44dff;
    --neon-pink: #ff4fa3;
    --text-main: #f5f5ff;
    --text-muted: #8f8fb3;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html, body {
    height: 100%;
    width: 100%;
    overflow: hidden;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    background: radial-gradient(circle at top left, var(--bg1), var(--bg2), var(--bg3));
    color: var(--text-main);
  }

  body {
    display: flex;
    flex-direction: column;
  }

  .chrome {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 10px 10px 8px;
    gap: 8px;
    background: radial-gradient(circle at top right, rgba(196, 77, 255, 0.18), transparent 55%),
                radial-gradient(circle at bottom left, rgba(0, 246, 255, 0.12), transparent 50%),
                linear-gradient(145deg, var(--bg1), var(--bg2), var(--bg3));
  }

  .topbar {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .address-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 6px;
    padding: 8px 10px;
    background: rgba(255, 255, 255, 0.04);
    border-radius: 999px;
    box-shadow:
      0 0 0 1px rgba(0, 246, 255, 0.22),
      0 0 18px rgba(0, 246, 255, 0.18);
    backdrop-filter: blur(16px);
  }

  .addr-icon {
    color: var(--neon-cyan);
    font-size: 14px;
  }

  .address-input {
    flex: 1;
    border: none;
    background: transparent;
    color: var(--text-main);
    font-size: 14px;
    outline: none;
  }

  .address-input::placeholder {
    color: var(--text-muted);
  }

  .go-btn {
    border: none;
    background: linear-gradient(135deg, var(--neon-cyan), var(--neon-violet));
    color: #000;
    font-size: 12px;
    font-weight: 600;
    padding: 6px 10px;
    border-radius: 999px;
    letter-spacing: 0.06em;
    text-transform: uppercase;
  }

  .mode-toggle {
    padding: 6px 8px;
    border-radius: 12px;
    background: rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.12);
    text-align: center;
    min-width: 70px;
  }

  .mode-label {
    font-size: 9px;
    letter-spacing: 0.14em;
    text-transform: uppercase;
    color: var(--text-muted);
  }

  .mode-value {
    font-size: 11px;
    margin-top: 2px;
  }

  .poison-on {
    color: var(--neon-pink);
    text-shadow: 0 0 8px rgba(255, 79, 163, 0.8);
  }

  .poison-off {
    color: var(--text-muted);
  }

  .middle {
    flex: 1;
    position: relative;
    border-radius: 14px;
    overflow: hidden;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.08),
      0 20px 50px rgba(0, 0, 0, 0.7);
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #050510;
  }

  .bottom {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
  }

  .status {
    flex: 1;
    font-size: 11px;
    color: var(--text-muted);
    display: flex;
    flex-direction: column;
    gap: 2px;
  }

  .status-line {
    display: flex;
    align-items: center;
    gap: 4px;
  }

  .status-dot {
    width: 7px;
    height: 7px;
    border-radius: 50%;
    background: var(--neon-cyan);
    box-shadow: 0 0 6px rgba(0, 246, 255, 0.8);
  }

  .status-text-strong {
    color: var(--text-main);
    font-size: 11px;
  }

  .status-sub {
    font-size: 10px;
  }

  .poison-button-wrapper {
    width: 76px;
    height: 76px;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .poison-button {
    width: 72px;
    height: 72px;
    border-radius: 50%;
    position: relative;
    border: none;
    cursor: pointer;
    background: radial-gradient(circle at 30% 20%, rgba(255, 255, 255, 0.35), transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(0, 246, 255, 0.3), transparent 55%),
                #05050a;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.15),
      0 0 22px rgba(0, 246, 255, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .poison-button-inner {
    width: 54px;
    height: 54px;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(196, 77, 255, 0.6), rgba(0, 0, 0, 0.9));
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
  }

  .poison-icon {
    font-size: 24px;
  }

  .poison-halo {
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    border: 2px solid rgba(255, 79, 163, 0.6);
    filter: blur(4px);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .poison-button.on .poison-halo {
    opacity: 1;
    animation: haloPulse 2.2s ease-in-out infinite;
  }

  .poison-button.off .poison-halo {
    opacity: 0;
  }

  .poison-caption {
    font-size: 10px;
    margin-top: 4px;
    text-align: center;
    color: var(--text-muted);
  }

  .poison-caption.on {
    color: var(--neon-pink);
    text-shadow: 0 0 10px rgba(255, 79, 163, 0.6);
  }

  @keyframes haloPulse {
    0% { transform: scale(1); opacity: 0.6; }
    50% { transform: scale(1.12); opacity: 1; }
    100% { transform: scale(1); opacity: 0.6; }
  }

  @media (max-width: 600px) {
    .status {
      display: none;
    }
  }
</style>
</head>
<body>
<div class="chrome">
  <div class="topbar">
    <div class="address-wrapper">
      <span class="addr-icon">◎</span>
      <input id="addressInput" class="address-input"
             placeholder="Enter URL or search"
             autocomplete="off" spellcheck="false" />
      <button class="go-btn" id="goButton">GO</button>
    </div>
    <button class="mode-toggle" id="modeToggle" type="button">
      <div class="mode-label">MODE</div>
      <div class="mode-value poison-off" id="modeValue">CLEAN</div>
    </button>
  </div>

  <div class="middle">
    <iframe id="view" src="https://duckduckgo.com"></iframe>
  </div>

  <div class="bottom">
    <div class="status">
      <div class="status-line">
        <div class="status-dot"></div>
        <div class="status-text-strong" id="statusPrimary">Ephemeral session</div>
      </div>
      <div class="status-sub" id="statusSecondary">
        No history. Neutral semantic noise only.
      </div>
    </div>
    <div class="poison-button-wrapper">
      <div>
        <button id="poisonButton" class="poison-button off" type="button">
          <div class="poison-button-inner">
            <div class="poison-halo"></div>
            <span class="poison-icon" id="poisonIcon">☠︎</span>
          </div>
        </button>
        <div id="poisonCaption" class="poison-caption">
          Clean signals.
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function() {
  const iframe = document.getElementById('view');
  const addrInput = document.getElementById('addressInput');
  const goButton = document.getElementById('goButton');
  const poisonButton = document.getElementById('poisonButton');
  const poisonIcon = document.getElementById('poisonIcon');
  const poisonCaption = document.getElementById('poisonCaption');
  const modeToggle = document.getElementById('modeToggle');
  const modeValue = document.getElementById('modeValue');
  const statusPrimary = document.getElementById('statusPrimary');
  const statusSecondary = document.getElementById('statusSecondary');

  let poisonOn = false;
  let noiseInterval = null;

  const languagePool = ['en-US','en-GB','fr-FR','de-DE','es-ES','it-IT'];
  const tzPool = ['UTC','Europe/Paris','Europe/Berlin','America/New_York','Asia/Tokyo','Europe/London'];

  function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function normalizeURL(input) {
    input = input.trim();
    if (!input) return null;
    if (/^https?:\/\//i.test(input)) {
      return input;
    }
    if (input.includes('.') && !input.includes(' ')) {
      return 'https://' + input;
    }
    const enc = encodeURIComponent(input);
    return 'https://duckduckgo.com/?q=' + enc;
  }

  function navigate() {
    const u = normalizeURL(addrInput.value);
    if (!u) return;
    iframe.src = u;
  }

  goButton.addEventListener('click', navigate);
  addrInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') navigate();
  });

  // --- POISON MODE TOGGLE ---

  function setPoisonState(on) {
    poisonOn = on;
    if (on) {
      poisonButton.classList.remove('off');
      poisonButton.classList.add('on');
      poisonIcon.textContent = '☣︎';
      poisonCaption.textContent = 'Poisoning tracking signals…';
      poisonCaption.classList.add('on');

      modeValue.textContent = 'POISON';
      modeValue.classList.remove('poison-off');
      modeValue.classList.add('poison-on');
      statusPrimary.textContent = 'Ephemeral + noisy session';
      statusSecondary.textContent = 'Neutral background noise. No history saved.';

      installNoise();
      injectPoisonIntoIframe();
    } else {
      poisonButton.classList.remove('on');
      poisonButton.classList.add('off');
      poisonIcon.textContent = '☠︎';
      poisonCaption.textContent = 'Clean signals.';
      poisonCaption.classList.remove('on');

      modeValue.textContent = 'CLEAN';
      modeValue.classList.remove('poison-on');
      modeValue.classList.add('poison-off');
      statusPrimary.textContent = 'Ephemeral session';
      statusSecondary.textContent = 'No history. Neutral semantic noise only.';

      clearNoise();
    }
  }

  poisonButton.addEventListener('click', () => setPoisonState(!poisonOn));
  modeToggle.addEventListener('click', () => setPoisonState(!poisonOn));

  // --- NOISE ENGINE (very lightweight, iframe-only) ---

  function installNoise() {
    clearNoise();
    noiseInterval = setInterval(() => {
      if (!poisonOn) return;
      try {
        const win = iframe.contentWindow;
        const doc = iframe.contentDocument || (win && win.document);
        if (!win || !doc) return;

        // Tiny scroll nudges that should not fight user scroll.
        const body = doc.scrollingElement || doc.body;
        if (!body) return;
        const maxScroll = body.scrollHeight - body.clientHeight;
        if (maxScroll <= 0) return;
        const delta = (Math.random() - 0.5) * 40; // +/- 40px
        let target = win.scrollY + delta;
        if (target < 0) target = 0;
        if (target > maxScroll) target = maxScroll;
        win.scrollTo({ top: target, behavior: 'smooth' });
      } catch (e) {
        // Cross-origin iframe: cannot access; ignore.
      }
    }, 5000 + Math.random() * 5000);
  }

  function clearNoise() {
    if (noiseInterval) {
      clearInterval(noiseInterval);
      noiseInterval = null;
    }
  }

  // --- "Fingerprint-ish" JS tweaks INSIDE iframe (same-origin only!) ---

  function injectPoisonIntoIframe() {
    const lang = randomChoice(languagePool);
    const tz = randomChoice(tzPool);

    try {
      const win = iframe.contentWindow;
      const doc = iframe.contentDocument || (win && win.document);
      if (!win || !doc) return;

      const script = doc.createElement('script');
      script.textContent = `
        try {
          Object.defineProperty(navigator, 'language', {
            get: function() { return '${lang}'; }
          });
        } catch (e) {}

        try {
          const origResolved = Intl.DateTimeFormat.prototype.resolvedOptions;
          Intl.DateTimeFormat.prototype.resolvedOptions = function() {
            const o = origResolved.apply(this, arguments);
            o.timeZone = '${tz}';
            return o;
          };
        } catch (e) {}
      `;
      (doc.head || doc.documentElement).appendChild(script);
    } catch (e) {
      // Cross-origin; cannot inject.
    }
  }

  iframe.addEventListener('load', () => {
    if (poisonOn) {
      injectPoisonIntoIframe();
    }
  });

  // Pre-fill address field with default.
  addrInput.value = 'https://duckduckgo.com';
})();
</script>
</body>
</html>
