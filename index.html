<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Poison Browser - Full Fixed</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
<style>
  :root {
    --bg1: #1a0b00;
    --bg2: #0b0500;
    --bg3: #000000;
    --orange-main: #ff8a00;
    --orange-neon: #ffb347;
    --orange-deep: #ff5e00;
    --text-main: #fff7ec;
    --text-muted: #9a8c7a;
    --accent-soft: #ffcf70;
  }

  * {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
  }

  html, body {
    height: 100vh;
    width: 100vw;
    overflow: hidden;
    font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
    background:
      radial-gradient(circle at top left 30%, rgba(255, 138, 0, 0.28), transparent 55%),
      radial-gradient(circle at bottom right 40%, rgba(255, 94, 0, 0.25), transparent 55%),
      linear-gradient(145deg, var(--bg1), var(--bg2), var(--bg3));
    color: var(--text-main);
  }

  body {
    display: flex;
    flex-direction: column;
  }

  .chrome {
    display: flex;
    flex-direction: column;
    height: 100vh;
    padding: 12px;
    gap: 12px;
  }

  .topbar {
    display: flex;
    align-items: center;
    gap: 12px;
    padding-bottom: 8px;
  }

  .address-wrapper {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 12px 16px;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 24px;
    box-shadow:
      0 0 0 1px rgba(255, 138, 0, 0.45),
      0 0 24px rgba(255, 138, 0, 0.35);
    backdrop-filter: blur(16px);
  }

  .addr-icon {
    color: var(--orange-main);
    font-size: 16px;
  }

  .address-input {
    flex: 1;
    border: none;
    background: transparent;
    color: var(--text-main);
    font-size: 16px;
    outline: none;
  }

  .address-input::placeholder {
    color: var(--text-muted);
  }

  .go-btn {
    border: none;
    background: linear-gradient(135deg, var(--orange-main), var(--orange-deep));
    color: #140800;
    font-size: 13px;
    font-weight: 600;
    padding: 8px 16px;
    border-radius: 20px;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    box-shadow:
      0 4px 16px rgba(255, 138, 0, 0.5),
      0 0 0 1px rgba(0, 0, 0, 0.7);
  }

  .poison-toggle {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    border-radius: 24px;
    background: rgba(0, 0, 0, 0.75);
    border: 1px solid rgba(255, 138, 0, 0.6);
    box-shadow:
      0 0 16px rgba(255, 138, 0, 0.5),
      0 0 0 1px rgba(0, 0, 0, 0.7);
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .poison-toggle:hover {
    box-shadow:
      0 0 24px rgba(255, 138, 0, 0.7),
      0 0 0 1px rgba(255, 138, 0, 0.9);
  }

  .poison-circle {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    background: #555555;
    box-shadow: 0 0 0 1px rgba(0,0,0,0.8);
    flex-shrink: 0;
  }

  .poison-circle.active {
    background: var(--orange-main);
    box-shadow:
      0 0 8px rgba(255, 138, 0, 1),
      0 0 20px rgba(255, 138, 0, 0.95);
    animation: poisonBlink 1.4s ease-in-out infinite;
  }

  .poison-text {
    font-size: 13px;
    letter-spacing: 0.16em;
    text-transform: uppercase;
    color: var(--text-muted);
    text-shadow: none;
    white-space: nowrap;
  }

  .poison-text.active {
    color: var(--accent-soft);
    text-shadow:
      0 0 10px rgba(255, 138, 0, 0.9),
      0 0 20px rgba(255, 94, 0, 0.7);
  }

  .middle {
    flex: 1;
    position: relative;
    border-radius: 20px;
    overflow: hidden;
    box-shadow:
      0 0 0 1px rgba(255, 255, 255, 0.12),
      0 24px 60px rgba(0, 0, 0, 0.85);
    background: radial-gradient(circle at top, rgba(255, 138, 0, 0.12), #050200);
    margin: 0 -12px;
  }

  iframe {
    width: 100%;
    height: 100%;
    border: none;
    background: #050200;
    border-radius: 20px;
  }

  .bottom {
    font-size: 12px;
    color: var(--text-muted);
    display: flex;
    flex-direction: column;
    gap: 4px;
    padding-top: 8px;
  }

  .status-line {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .status-dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--orange-main);
    box-shadow: 0 0 8px rgba(255, 138, 0, 0.8);
  }

  .status-strong {
    color: var(--text-main);
    font-size: 12px;
  }

  @keyframes poisonBlink {
    0%   { opacity: 0.4; transform: scale(0.9); }
    50%  { opacity: 1;   transform: scale(1.1); }
    100% { opacity: 0.4; transform: scale(0.9); }
  }

  @media (max-width: 600px) {
    .chrome {
      padding: 8px;
      gap: 8px;
    }
    .address-wrapper {
      padding: 10px 14px;
    }
    .poison-toggle {
      padding: 8px 12px;
    }
  }
</style>
</head>
<body>
<div class="chrome">
  <div class="topbar">
    <div class="address-wrapper">
      <span class="addr-icon">â—Ž</span>
      <input id="addressInput" class="address-input"
             placeholder="Enter URL or search (hackernews, bleepingcomputer...)"
             autocomplete="off" spellcheck="false" />
      <button class="go-btn" id="goButton">GO</button>
    </div>

    <button class="poison-toggle" id="poisonToggle" type="button">
      <span class="poison-circle" id="poisonCircle"></span>
      <span class="poison-text" id="poisonText">Poison</span>
    </button>
  </div>

  <div class="middle">
    <iframe id="view" src="https://api.allorigins.win/raw?url=https://thehackernews.com"></iframe>
  </div>

  <div class="bottom">
    <div class="status-line">
      <div class="status-dot"></div>
      <div class="status-strong" id="statusPrimary">Proxy + Poison ready</div>
    </div>
    <div id="statusSecondary">
      Fullscreen cybersecurity browser. All iframe blocks bypassed.
    </div>
  </div>
</div>

<script>
(function() {
  const iframe = document.getElementById('view');
  const addrInput = document.getElementById('addressInput');
  const goButton = document.getElementById('goButton');
  const poisonToggle = document.getElementById('poisonToggle');
  const poisonCircle = document.getElementById('poisonCircle');
  const poisonText = document.getElementById('poisonText');
  const statusPrimary = document.getElementById('statusPrimary');
  const statusSecondary = document.getElementById('statusSecondary');

  let poisonOn = false;
  let noiseInterval = null;
  let currentProxyIndex = 0;

  const proxies = [
    'https://api.allorigins.win/raw?url=',
    'https://corsproxy.io/?',
    'https://thingproxy.freeboard.io/fetch/'
  ];

  const languagePool = ['en-US','en-GB','fr-FR','de-DE','es-ES','it-IT'];
  const tzPool = ['UTC','Europe/Paris','Europe/Berlin','America/New_York','Asia/Tokyo','Europe/London'];

  function randomChoice(arr) {
    return arr[Math.floor(Math.random() * arr.length)];
  }

  function normalizeURL(input) {
    input = input.trim();
    if (!input) return null;
    if (/^https?:\/\//i.test(input)) return input;
    if (input.includes('.') && !input.includes(' ')) return 'https://' + input;
    return 'https://duckduckgo.com/?q=' + encodeURIComponent(input);
  }

  function navigate() {
    let target = normalizeURL(addrInput.value);
    if (!target) return;

    const proxy = proxies[currentProxyIndex];
    const proxiedUrl = proxy + encodeURIComponent(target);
    
    statusPrimary.textContent = 'Loading via proxy...';
    console.log('Loading:', proxiedUrl);
    iframe.src = proxiedUrl;
    
    currentProxyIndex = (currentProxyIndex + 1) % proxies.length;
  }

  iframe.addEventListener('error', () => {
    statusPrimary.textContent = 'Proxy failed, retrying...';
    setTimeout(() => navigate(), 1500);
  });

  iframe.addEventListener('load', () => {
    statusPrimary.textContent = poisonOn ? 'Poison + proxy active' : 'Proxy loaded';
    if (poisonOn) injectPoisonIntoIframe();
  });

  goButton.addEventListener('click', navigate);
  addrInput.addEventListener('keydown', e => {
    if (e.key === 'Enter') navigate();
  });

  function setPoisonState(on) {
    poisonOn = on;
    if (on) {
      poisonCircle.classList.add('active');
      poisonText.classList.add('active');
      poisonText.textContent = 'Poisoning';
      statusPrimary.textContent = 'Poison + proxy active';
      statusSecondary.textContent = 'Behavioral noise + JS fingerprint corruption';
      installNoise();
      injectPoisonIntoIframe();
    } else {
      poisonCircle.classList.remove('active');
      poisonText.classList.remove('active');
      poisonText.textContent = 'Poison';
      statusPrimary.textContent = 'Proxy loaded';
      statusSecondary.textContent = 'Full proxy bypass active';
      clearNoise();
    }
  }

  poisonToggle.addEventListener('click', () => setPoisonState(!poisonOn));

  function installNoise() {
    clearNoise();
    noiseInterval = setInterval(() => {
      if (!poisonOn) return;
      try {
        const win = iframe.contentWindow;
        if (!win) return;
        const body = win.document?.scrollingElement || win.document?.body;
        if (!body) return;
        const maxScroll = body.scrollHeight - body.clientHeight;
        if (maxScroll <= 0) return;
        const delta = (Math.random() - 0.5) * 50;
        let target = win.scrollY + delta;
        if (target < 0) target = 0;
        if (target > maxScroll) target = maxScroll;
        win.scrollTo({ top: target, behavior: 'smooth' });
      } catch (e) {}
    }, 4000 + Math.random() * 6000);
  }

  function clearNoise() {
    if (noiseInterval) {
      clearInterval(noiseInterval);
      noiseInterval = null;
    }
  }

  function injectPoisonIntoIframe() {
    const lang = randomChoice(languagePool);
    const tz = randomChoice(tzPool);
    try {
      const win = iframe.contentWindow;
      if (!win?.document) return;
      const script = win.document.createElement('script');
      script.textContent = `
        try {
          Object.defineProperty(navigator, 'language', { get: () => '${lang}' });
        } catch(e){}
        try {
          const orig = Intl.DateTimeFormat.prototype.resolvedOptions;
          Intl.DateTimeFormat.prototype.resolvedOptions = function() {
            const o = orig.apply(this, arguments);
            o.timeZone = '${tz}';
            return o;
          };
        } catch(e){}
      `;
      (win.document.head || win.document.documentElement).appendChild(script);
    } catch (e) {}
  }

  // Auto-load hacker news
  addrInput.value = 'https://thehackernews.com';
})();
</script>
</body>
</html>
